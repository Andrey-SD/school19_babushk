//for left_part height = main_part height
var max_height=0;
$(document).ready(function(){
	left_part_init('div.left_part_tab');
	setTimeout('fix_height()', 2000);
	//fix_height();
	multimedia_init('a._editor_appearing_block');
});

//add thickbox to href & area elements that have a class of .thickbox
function multimedia_init(domChunk){
	$(domChunk).each(function(){
		ps=this.id.split("button-");
		block_id=ps[1];
		$('#'+block_id).css('display','none');
	});
	$(domChunk).click(function(){
		var a = this.id;
		var g = this.rev || 'show';
		multimedia_show(a,g);
		return false;
	});
}

function multimedia_show(id, effect) {

	try {
		ps=id.split("button-");
		block_id=ps[1];
		if($('#'+block_id).css('display')=='none'){
			switch (effect) {
				case "show":
					$('#'+block_id).show('slow');
					break;
				case "slideDown":
					$('#'+block_id).slideDown('slow');
					break;
				case "fadeIn":
					$('#'+block_id).fadeIn('slow');
					break;
				default:
					$('#'+block_id).show('slow');
					break;
			}
		}
		else{
			switch (effect) {
				case "show":
					$('#'+block_id).hide('slow');
					break;
				case "slideDown":
					$('#'+block_id).slideUp('slow');
					break;
				case "fadeIn":
					$('#'+block_id).fadeOut('slow');
					break;
				default:
					$('#'+block_id).hide('slow');
					break;
			}
		}
	} catch(e) {
		//nothing here
	}
}


function left_part_init(domChunk){
	$(domChunk).each(function(){
		he=$(this).height();
		if(max_height<he){
			max_height=he;
		}
		if($(this).attr('id')!=$('div.left_part_tab').last().attr('id')){
			$(this).animate({
				opacity: 0,
				width:"1%",
				height:"1%",
				marginTop: "150px",
				marginLeft: "150px"
			}, 	1 ,
				function() {
					// Animation complete.
					$(this).css('display','none');
			  	}
		  	);
		}
	});
}

var tab_width='';
function left_part_page_scroll(tabid){
	if(tab_width=='')
		tab_width=$("#left_part_tab_"+String(tabid)).css('width');
	//find last element
	//alert('remove '+tabid);
	if((Number(tabid)-1)<0){
		next_tabid=tabid;
		do{
			 next_tabid=Number(next_tabid)+1;
			 lgh=$('#left_part_tab_'+String(next_tabid)).length;
			 //alert(String(next_tabid)+" lengt "+String(lgh));
		} while (lgh>0);
		last_tabid=Number(next_tabid)-1;
	}
	else{
		last_tabid=Number(tabid)-1;
	}
	//alert('remove '+tabid+' show '+last_tabid);
	//$("#left_part_tab_"+String(last_tabid)).css('display','block').css('opacity','100%').css('width','100%').css('height','100%').css('margin-top','0px').css('margin-left','0px');


	$("#left_part_tab_"+String(last_tabid)).css('display','block');
	$("#left_part_tab_"+String(last_tabid)).animate({
		opacity: 1,
		width:tab_width,
		height:max_height,
		marginTop: "0px",
		marginLeft: "0px"
	}, 1500 ,
		function() {
	    	// Animation complete.
	  	}
  	);
	//$("#left_part_tab_"+String(last_tabid)).css('display','block').css('opacity','1').css('width',tab_width);

	$("#left_part_tab_"+String(tabid)).animate({
		opacity: 0,
		width:"1%",
		height:"1%",
		marginTop: "150px",
		marginLeft: "150px"
	}, 1500 ,
		function() {
	    	// Animation complete.
	    	$("#left_part_tab_"+String(tabid)).css('display','none');
	  	}
  	);
//alert('34');
	return false;
}


function fix_height(){//alert(max_height);
	//h1=$('#left_part').css('height');
	h1=max_height;
	h2=$('#main_part').height();
	//alert(h2);
	if(h1>h2){
		$('#main_part').css('height',String(h1)+"px");
	}
	else{
		$('#left_part').css('height',String(h2)+"px");
	}
}